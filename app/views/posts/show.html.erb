<div class="position-relative">
  <h1 class="toukou-title text-center mt-3 mb-5" style="position: relative; top: 30px;font-size: 128px;"><%= @post.title %></h1>

    <div style="
      position: absolute;
      top: 0;
      right: 0;
      z-index: 10;
      ">
     <%= render "shared/navigation_box" %>
    </div>

  <% if @post.image_urls.present? %>
    <div class="d-flex gap-4 justify-content-center mb-5" style="max-width: 2500px; margin: 0 auto;">
    
      <!-- 左：画像 -->
      <div class="rounded shadow-sm overflow-hidden"
           style="width: 1500px; height: 1000px; margin-top: 20px; margin-left: 370px;">
        <%= image_tag @post.image_urls.first, class: "img-fluid w-100 h-100", alt: "投稿画像", style: "object-fit: cover;" %>
      </div>

      <!-- 右：投稿者情報ボックス -->
      <div class="p-4 rounded shadow-sm"
           style="width: 350px; height: 400px; background-color: #ffffff; border: 2px solid #000; overflow-y: auto; margin-top: 20px;">

          <div class="d-flex align-items-center mb-4" style="border-bottom: 2px solid #000; padding-bottom: 10px;">
            <%= image_tag @post.user.avatar, alt: "投稿者アイコン", class: "rounded-circle me-3", style: "position: relative; left: 10px; width: 64px; height: 64px; object-fit: cover;" %>
            <h4 class="fw-bold mb-0" style="position: relative; left: 20px;"><%= @post.user.name %></h4>
          </div>

          <button class="btn mb-4 w-100" style="background-color: orange; color: white;" disabled>
            <i class="bi bi-bookmark me-2"></i>ブックマークする（開発中）
          </button>

          <button class="btn mb-3 w-100" style="background-color: #0d6efd; color: white;" disabled>
           <i class="bi bi-collection me-2"></i>他の投稿作品（開発中）
          </button> 
      </div>

    </div>
  <% else %>
    <p class="text-center text-muted">画像は投稿されていません</p>
  <% end %>



  <div class="mx-auto rounded-4 shadow-sm p-5 mb-5"
       style="max-width: 1500px; min-height: 200px; background-color: #ffffff; border: 2px solid #000;">
    <div style="font-size: 25px; line-height: 0; margin-bottom: 0;"><%= simple_format(@post.body) %></div>
  </div>



  <% visible_products = @post.products.select do |product| %>
    <% [product.title, product.description, product.image_url].any?(&:present?) %>
  <% end %>

  <% if visible_products.any? %>
    <div class="text-center mb-4" style="max-width: 1500px; margin: 0 auto;">
      <h2 class="fw-bold" style="font-size: 48px;">オススメグッズ</h2>
    </div>
  <% end %>


  <% visible_products.each do |product| %>
    <div class="d-flex gap-4 align-items-center p-4 shadow-sm rounded mx-auto mb-5"
         style="width: 1500px; height: 300px; background-color: #ffffff; border: 2px solid #000;">
      <% if product.image_url.present? %>
        <div style="width: 400px; height: 100%; flex-shrink: 0;">
          <%= image_tag product.image_url, class: "img-fluid w-100 h-100", style: "object-fit: cover;" %>
        </div>
      <% end %>
      <div class="flex-grow-1">
        <h2 class="fw-bold fs-2 mb-3" style="position: relative; left: 10px; "><%= product.title %></h2>
        <div class="p-4 rounded-3 border" style="background-color: #ffffff; border-color: #000;">
          <p class="fs-5 lh-lg mb-0"><%= simple_format(product.description) %></p>
        </div>
        <% if product.url.present? %>
          <a href="<%= product.url %>" target="_blank" class="btn btn-success mt-3">商品ページを見る</a>
        <% else %>
          <p class="text-muted mt-3">URLはありません</p>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
